I"|<h1 id="state-sync">State Sync</h1>

<p>With block sync a node is downloading all of the data of an application from genesis and verifying it.
With state sync your node will download data related to the head or near the head of the chain and verify the data.
This leads to drastically shorter times for joining a network.</p>

<h2 id="using-state-sync">Using State Sync</h2>

<p>State sync will continuously work in the background to supply nodes with chunked data when bootstrapping.</p>

<blockquote>
  <p>NOTE: Before trying to use state sync, see if the application you are operating a node for supports it.</p>
</blockquote>

<p>Under the state sync section in <code class="language-plaintext highlighter-rouge">config.toml</code> you will find multiple settings that need to be configured in order for your node to use state sync.</p>

<p>Lets breakdown the settings:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">enable</code>: Enable is to inform the node that you will be using state sync to bootstrap your node.</li>
  <li><code class="language-plaintext highlighter-rouge">rpc_servers</code>: RPC servers are needed because state sync utilizes the light client for verification.
    <ul>
      <li>2 servers are required, more is always helpful.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">temp_dir</code>: Temporary directory is store the chunks in the machines local storage, If nothing is set it will create a directory in <code class="language-plaintext highlighter-rouge">/tmp</code></li>
</ul>

<p>The next information you will need to acquire it through publicly exposed RPC’s or a block explorer which you trust.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">trust_height</code>: Trusted height defines at which height your node should trust the chain.</li>
  <li><code class="language-plaintext highlighter-rouge">trust_hash</code>: Trusted hash is the hash in the <code class="language-plaintext highlighter-rouge">BlockID</code> corresponding to the trusted height.</li>
  <li><code class="language-plaintext highlighter-rouge">trust_period</code>: Trust period is the period in which headers can be verified.
    <blockquote>
      <p>:warning: This value should be significantly smaller than the unbonding period.</p>
    </blockquote>
  </li>
</ul>

<p>If you are relying on publicly exposed RPC’s to get the need information, you can use <code class="language-plaintext highlighter-rouge">curl</code>.</p>

<p>Example:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-s</span> https://233.123.0.140:26657/commit | jq <span class="s2">"{height: .result.signed_header.header.height, hash: .result.signed_header.commit.block_id.hash}"</span>
</code></pre></div></div>

<p>The response will be:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"height"</span><span class="p">:</span><span class="w"> </span><span class="s2">"273"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"188F4F36CBCD2C91B57509BBF231C777E79B52EE3E0D90D06B1A25EB16E6E23D"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
:ET